!function(a){var t=a(document).data("func",{});a.smartMenu=a.noop,a.fn.smartMenu=function(e,i){var n=a("body"),s={name:"",offsetX:2,offsetY:2,textLimit:6,beforeShow:a.noop,afterShow:a.noop},r=a.extend(s,i||{}),o=function(i){var n=i||e,s=i?Math.random().toString():r.name,c="",l="smart_menu_";return a.isArray(n)&&n.length&&(c='<div id="smartMenu_'+s+'" class="'+l+'box"><div class="'+l+'body"><ul class="'+l+'ul">',a.each(n,function(e,i){e&&(c=c+'<li class="'+l+'li_separate">&nbsp;</li>'),a.isArray(i)&&a.each(i,function(e,i){var n=i.text,s=i.icoClass,d="",h="",u=Math.random().toString().replace(".","");if(n){n.length>r.textLimit&&(n=n.slice(0,r.textLimit)+"â€¦",h=' title="'+i.text+'"'),d=a.isArray(i.data)&&i.data.length?'<li class="'+l+'li" data-hover="true">'+o(i.data)+'<a href="javascript:" class="'+l+'a"'+h+' data-key="'+u+'"><i class="'+l+'triangle"></i>'+n+"</a></li>":s?'<li class="'+l+'li">	<a href="javascript:" class="'+l+'a"'+h+' data-key="'+u+'">		<span class="'+s+'"></span>'+n+"	</a></li>":'<li class="'+l+'li"><a href="javascript:" class="'+l+'a"'+h+' data-key="'+u+'">'+n+"</a></li>",c+=d;var f=t.data("func");f[u]=i.func,t.data("func",f)}})}),c+="</ul></div></div>"),c},c=function(){var e="#smartMenu_",i="smart_menu_",n=a(e+r.name);return n.size()?n:(a("body").append(o()),a(e+r.name+" a").bind("click",function(){var e=a(this).attr("data-key"),i=t.data("func")[e];return a.isFunction(i)&&i.call(t.data("trigger")),a.smartMenu.hide(),!1}),a(e+r.name+" li").each(function(){var t=a(this).attr("data-hover"),e=i+"li_hover";a(this).hover(function(){var n=a(this).siblings("."+e);n.removeClass(e).children("."+i+"box").hide(),n.children("."+i+"a").removeClass(i+"a_hover"),t&&(a(this).addClass(e).children("."+i+"box").show(),a(this).children("."+i+"a").addClass(i+"a_hover"))})}),a(e+r.name))};a(this).each(function(){this.oncontextmenu=function(e){a.isFunction(r.beforeShow)&&r.beforeShow.call(this),e=e||window.event,e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),a.smartMenu.hide();var i=t.scrollTop(),n=c();return n?(n.css({display:"block",left:e.clientX+r.offsetX,top:e.clientY+i+r.offsetY}),t.data("target",n),t.data("trigger",this),a.isFunction(r.afterShow)&&r.afterShow.call(this),!1):void 0}}),n.data("bind")||n.bind("click",a.smartMenu.hide).data("bind",!0)},a.extend(a.smartMenu,{hide:function(){var a=t.data("target");a&&"block"===a.css("display")&&a.hide()},removeevent:function(e){var i=t.data("target");i&&(i.remove(),a.isFunction(e)&&e.call(this))},remove:function(){var a=t.data("target");a&&a.remove()}})}(jQuery);